<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Raiting</title>
   <link rel="stylesheet" href="css/style.css">
   <script defer src="js/script.js"></script>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
   <div class="container">
      <div class="ws-rating">
         <a href="index.html"><button class="btn btn-primary btn-home">Home</button></a>
         <button type="button" class="btn btn-danger" id="play-confetti play-music">Play Confetti</button>
         <audio id="confetti-sound" src=""></audio>
         <div class="stand">
            <div class="stand-container">
               <div class="stand-1">
                  <div>1</div>
                  <div>WS Lorem ipsum dolor</div>
                  <div class="running-number">1684</div>
                  <div>points</div>
               </div>
               <div class="stand-2">
                  <div>2</div>
                  <div>WS Lorem ipsum dolor</div>
                  <div class="running-number">100</div>
                  <div>points</div>
               </div>
               <div class="stand-3">
                  <div>3</div>
                  <div>WS Lorem ipsum dolor</div>
                  <div class="running-number">568</div>
                  <div>points</div>
               </div>
            </div>
         </div>

         <h3>List of clubs</h3>

         <table class="table">
            <tbody>
               <tr>
                  <td>4.</td>
                  <td>WS Lorem ipsum dolor</td>
                  <td>123 points</td>
               </tr>
               <tr>
                  <td>4.</td>
                  <td>WS Lorem ipsum dolor</td>
                  <td>123 points</td>
               </tr>
               <tr>
                  <td>4.</td>
                  <td>WS Lorem ipsum dolor</td>
                  <td>123 points</td>
               </tr>
               <tr class="active-klub">
                  <td>4.</td>
                  <td>WS Lorem ipsum dolor</td>
                  <td>123 points</td>
               </tr>
               <tr>
                  <td>4.</td>
                  <td>WS Lorem ipsum dolor</td>
                  <td>123 points</td>
               </tr>
               <tr>
                  <td>4.</td>
                  <td>WS Lorem ipsum dolor</td>
                  <td>123 points</td>
               </tr>
            </tbody>
         </table>

      </div>
   </div>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous">
      </script>
   <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.1/dist/confetti.browser.min.js"></script>
   <script>
      // Running numbers
      function animateRunningNumber(targetElement, targetNumber) {
         let currentNumber = 0;
         const duration = 2000; // Продолжительность анимации в миллисекундах
         const interval = 20; // Интервал обновления значения
         const steps = duration / interval;
         const increment = targetNumber / steps;

         const intervalId = setInterval(() => {
            currentNumber += increment;
            targetElement.textContent = Math.round(currentNumber);

            if (Math.round(currentNumber) >= targetNumber) {
               clearInterval(intervalId);
            }
         }, interval);
      }

      const runningNumbers = document.querySelectorAll('.running-number');
      setTimeout(function () {
         runningNumbers.forEach((numberElement) => {
            const targetNumber = parseInt(numberElement.textContent);
            animateRunningNumber(numberElement, targetNumber);
         });
      }, 1000);

      // Confetti
      function startConfetti() {
         var end = Date.now() + (1 * 1000); // Duration
         var colors = ['#bb0000', '#ffffff'];

         var audio = document.getElementById('play-music');
         audio.play();

         (function frame() {
            confetti({
               particleCount: 2,
               angle: 60,
               spread: 55,
               origin: { x: 0 },
               colors: colors
            });
            confetti({
               particleCount: 2,
               angle: 120,
               spread: 55,
               origin: { x: 1 },
               colors: colors
            });

            if (Date.now() < end) {
               requestAnimationFrame(frame);
            }
         }());
      }

      const playButton = document.getElementById('play-confetti');
      playButton.addEventListener('click', function () {
         startConfetti();
      });
   </script>

</body>

</html>